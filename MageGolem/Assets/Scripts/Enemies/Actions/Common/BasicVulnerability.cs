using Auras;
using Behaviours;
using UnityEngine;

namespace Enemies.Actions.Common
{
    public class BasicVulnerability : IEnemyAction
    {
        public int Damage { get; }
        public string Name = nameof(BasicAttack);
        public Aura Aura;
        public Sprite ActionIcon { get; private set; }
        public ActionTarget Target => ActionTarget.Player;

        public BasicVulnerability(int duration, float magnitude)
        {
            Aura = AuraFactory.GetAura(AuraEffect.LessMultiplierDefense);
            Aura.Duration = duration;
            Aura.MagnitudeDefensive = magnitude;
        }
        
        public void Initialize()
        {
            ActionIcon = Resources.Load<Sprite>("Debuff");
        }
        
        public void Execute(EnemyActor actor)
        {
            Aura = AuraFactory.GetAura(AuraEffect.LessMultiplierDefense);
            EnemyManager.Instance.AuraApplyRequest(Aura, Target, actor);
        }
    }
}